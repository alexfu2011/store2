{"ast":null,"code":"var _jsxFileName = \"/Users/mac/dev/store2/admin/src/products/product.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport MaterialTable from 'material-table';\nimport { Button, Spinner } from 'react-bootstrap';\nimport { getAllProducts, deleteProduct, editProductFormatter } from './../services/productService';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport NavBar from '../components/navBar';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const Product = props => {\n  _s();\n\n  const [product, setProduct] = useState(null);\n  const [barOpen, setBarOpen] = useState(false);\n  const [dbError, setDbError] = useState(false);\n\n  const getProduct = async () => {\n    const data = await getAllProducts(); // console.log('p',data)\n\n    if (!data) {\n      setTimeout(() => {\n        setDbError(true);\n      }, 2000);\n    }\n\n    setProduct(data);\n  };\n\n  const handleClose = () => {\n    setBarOpen(false);\n  };\n\n  const columns = [{\n    title: \"Product Name\",\n    field: 'name'\n  }, {\n    title: \"Brand Name\",\n    field: 'brand.brandName'\n  }, {\n    title: 'Model Name',\n    field: \"manufactureDetails.modelName\"\n  }, {\n    title: \"Category\",\n    field: 'category.name'\n  }, //  {title:\"Variants\",field:'variants.length'},\n  {\n    title: \"Images\",\n    field: 'gallery.length'\n  }, {\n    title: \"Tags\",\n    field: 'tags.length'\n  }, // {title:\"Stock\",field:'variants[0].stock'},\n  // {title:\"Price\",field:'variants[0].price'},\n  {\n    title: \"Is Active\",\n    field: 'isActive',\n    render: rowData => {\n      if (rowData.isActive) {\n        return /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            color: 'green',\n            fontWeight: \"bolder\"\n          },\n          children: \"Active\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 40,\n          columnNumber: 33\n        }, this);\n      } else {\n        return /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            color: 'red',\n            fontWeight: \"bolder\"\n          },\n          children: \"InActive\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 33\n        }, this);\n      }\n    }\n  }];\n  useEffect(() => {\n    getProduct(); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(NavBar, { ...props\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 14\n    }, this), product ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          margin: '10px 20px'\n        },\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          onClick: () => {\n            props.history.push('/product/add');\n          },\n          children: \"Add Product\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 8\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 12\n      }, this), /*#__PURE__*/_jsxDEV(MaterialTable, {\n        style: {\n          marginTop: '15px'\n        },\n        title: \"Products\",\n        data: product,\n        columns: columns,\n        actions: [{\n          icon: 'edit',\n          tooltip: 'Edit User',\n          onClick: async (event, rowData) => {\n            const edit = await editProductFormatter(rowData);\n            console.log(\"Edit\", edit);\n            props.history.replace({\n              pathname: '/product/add',\n              state: edit\n            });\n          }\n        }],\n        editable: {\n          onRowDelete: selectedRow => new Promise(async (resolve, reject) => {\n            const id = selectedRow._id;\n            console.log(id);\n            const data = await deleteProduct(id);\n\n            if (data) {\n              setBarOpen(true);\n              getProduct();\n              resolve();\n            }\n          })\n        },\n        options: {\n          actionsColumnIndex: -1,\n          showFirstLastPageButtons: false,\n          pageSizeOptions: [5, 10, 20, 50]\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 8\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 8\n    }, this) : dbError ? /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        width: '100%',\n        height: '100px',\n        marginTop: '300px'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          display: 'block',\n          marginLeft: 'auto',\n          marginRight: 'auto',\n          textAlign: 'center'\n        },\n        children: [\"Looks like Server Down!!\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 14\n        }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"/product\",\n          children: \"Try Reloading the page\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 19\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 15\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        width: '100%',\n        height: '100px',\n        marginTop: '300px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(Spinner, {\n        style: {\n          display: 'block',\n          marginLeft: 'auto',\n          marginRight: 'auto',\n          height: '50px',\n          width: '50px'\n        },\n        animation: \"border\",\n        variant: \"primary\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          display: 'block',\n          marginLeft: 'auto',\n          marginRight: 'auto',\n          textAlign: 'center'\n        },\n        children: \"Loading\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 16\n    }, this), /*#__PURE__*/_jsxDEV(Snackbar, {\n      open: barOpen,\n      message: \"Successfully Deleted\",\n      autoHideDuration: 3500,\n      onClose: handleClose\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Product, \"aCcKQ7LQLDZlUDfTOX9uXq/6Agc=\");\n\n_c = Product;\nexport default Product;\n\nvar _c;\n\n$RefreshReg$(_c, \"Product\");","map":{"version":3,"sources":["/Users/mac/dev/store2/admin/src/products/product.js"],"names":["React","useEffect","useState","MaterialTable","Button","Spinner","getAllProducts","deleteProduct","editProductFormatter","Snackbar","NavBar","Product","props","product","setProduct","barOpen","setBarOpen","dbError","setDbError","getProduct","data","setTimeout","handleClose","columns","title","field","render","rowData","isActive","color","fontWeight","margin","history","push","marginTop","icon","tooltip","onClick","event","edit","console","log","replace","pathname","state","onRowDelete","selectedRow","Promise","resolve","reject","id","_id","actionsColumnIndex","showFirstLastPageButtons","pageSizeOptions","width","height","display","marginLeft","marginRight","textAlign"],"mappings":"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","sourcesContent":["import React,{useEffect, useState} from 'react';\nimport MaterialTable from 'material-table'\nimport { Button,Spinner, } from 'react-bootstrap';\nimport {getAllProducts,deleteProduct,editProductFormatter} from './../services/productService'\nimport Snackbar from '@material-ui/core/Snackbar'\nimport NavBar from '../components/navBar';\n\nexport const Product = (props) => {\n    const [product,setProduct] = useState(null)\n    const [barOpen,setBarOpen]= useState(false)\n    const [dbError,setDbError]= useState(false)\n    const  getProduct = async()=>  {\n            const data = await getAllProducts()\n            // console.log('p',data)\n            if(!data){\n                setTimeout(() => {\n                    setDbError(true)\n                }, 2000);\n            }\n            setProduct(data)\n    }\n    const handleClose=()=>{\n        setBarOpen(false\n            )\n    }\n   \n    const columns=[{title:\"Product Name\",field:'name'},\n                     {title:\"Brand Name\",field:'brand.brandName'},\n                 {title:'Model Name',field:\"manufactureDetails.modelName\"},\n                     {title:\"Category\",field:'category.name'},\n                    //  {title:\"Variants\",field:'variants.length'},\n                     {title:\"Images\",field:'gallery.length'},\n                     {title:\"Tags\",field:'tags.length'},\n                    // {title:\"Stock\",field:'variants[0].stock'},\n                    // {title:\"Price\",field:'variants[0].price'},\n                    {title:\"Is Active\",field:'isActive',\n                    render:rowData=>{\n                        if(rowData.isActive){\n                            return(\n                                <p style={{color: 'green',fontWeight:\"bolder\"}}>Active</p>\n                            )\n                        }\n                        else{\n                            return(\n                                <p style={{color: 'red',fontWeight:\"bolder\"}}>InActive</p>\n                            )\n                        }\n                    }\n                },\n]\n    useEffect(()=>{\n        getProduct()\n        \n          // eslint-disable-next-line react-hooks/exhaustive-deps\n    },[])\n    return(\n      \n        <div >\n             <NavBar {...props}></NavBar>\n           \n            \n       {product ? \n       <div>\n           <div style={{margin:'10px 20px'}}>\n       <Button onClick={()=>{props.history.push('/product/add')}}>Add Product</Button> \n      \n          </div>\n       <MaterialTable style={{marginTop:'15px'}} title=\"Products\" data={product} columns={columns} \n       actions={[\n        {\n\n          icon: 'edit',\n          tooltip: 'Edit User',\n          onClick:async (event, rowData) => {\n              const edit = await editProductFormatter(rowData)\n              console.log(\"Edit\",edit)\n              props.history.replace({\n                pathname: '/product/add',\n                state: edit \n              })\n            }\n        },\n      ]}\n       editable={{\n            onRowDelete:selectedRow => new Promise(async(resolve,reject)=>{\n                const id=selectedRow._id\n                console.log(id)\n                const data = await deleteProduct(id)\n                if(data){\n                    setBarOpen(true)\n                    getProduct()\n                    resolve()\n                }\n            }),\n       }}\n       \n         options={{\n           actionsColumnIndex:-1,\n            showFirstLastPageButtons:false,\n           pageSizeOptions:[5,10,20,50]\n       }} \n       \n       >\n        \n            </MaterialTable>\n\n       </div>\n          :\n              dbError ? \n              <div style={{width:'100%',height:'100px',marginTop:'300px'}} >\n              \n            <p style={{display:'block',marginLeft:'auto',\n            marginRight:'auto',textAlign:'center'}}>Looks like Server Down!!\n             <br/><a href=\"/product\">\n  Try Reloading the page\n</a></p>\n           \n              </div>\n              :\n               <div style={{width:'100%',height:'100px',marginTop:'300px'}} >\n              <Spinner  style={{display:'block',marginLeft:'auto',\n            marginRight:'auto',height:'50px',width:'50px'}} animation=\"border\" variant=\"primary\" />\n            <p style={{display:'block',marginLeft:'auto',\n            marginRight:'auto',textAlign:'center'}}>Loading</p>\n              </div>\n              \n          }\n             \n        <Snackbar open={barOpen} message=\"Successfully Deleted\" autoHideDuration={3500} onClose={handleClose}>\n        \n      </Snackbar>\n        </div>\n\n    )\n}\nexport default Product"]},"metadata":{},"sourceType":"module"}