{"ast":null,"code":"var _jsxFileName = \"/Users/mac/dev/store2/admin/src/products/product.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState, useContext } from 'react';\nimport MaterialTable from 'material-table';\nimport { Button, Spinner } from 'react-bootstrap';\nimport { getAllProducts, deleteProduct, editProductFormatter } from './../services/productService';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport NavBar from '../components/navBar';\nimport * as axios from 'axios';\nimport { url, jwt, userId } from './../constants/auth';\nimport { useCookies } from \"react-cookie\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const Product = props => {\n  _s();\n\n  const [cookies, setCookie] = useCookies([\"token\"]);\n  const [product, setProduct] = useState([]);\n  const [barOpen, setBarOpen] = useState(false);\n  const [dbError, setDbError] = useState(false);\n\n  const getProduct = async () => {\n    try {\n      const token = cookies.token;\n      const res = await axios.get(url + '/product/user/60826e0faab69e002b1293d1', {\n        headers: {\n          'Content-Type': 'application/json',\n          authorization: `Bearer ${token}`\n        }\n      });\n      console.log(res);\n\n      if (res.status === 200) {\n        setProduct(res.data);\n      }\n    } catch (error) {\n      if (error) {\n        setDbError(true);\n      }\n    }\n  };\n\n  const handleClose = () => {\n    setBarOpen(false);\n  };\n\n  const columns = [{\n    title: \"Product ID\",\n    field: '_id'\n  }, {\n    title: \"Product Name\",\n    field: 'name'\n  }, {\n    title: \"Brand Name\",\n    field: 'brand.brandName'\n  }, {\n    title: 'Model Name',\n    field: \"manufactureDetails.modelName\"\n  }, {\n    title: \"Category\",\n    field: 'category.name'\n  }, //  {title:\"Variants\",field:'variants.length'},\n  {\n    title: \"Images\",\n    field: 'gallery.length'\n  }, {\n    title: \"Tags\",\n    field: 'tags.length'\n  }, // {title:\"Stock\",field:'variants[0].stock'},\n  // {title:\"Price\",field:'variants[0].price'},\n  {\n    title: \"Is Active\",\n    field: 'isActive',\n    render: rowData => {\n      if (rowData.isActive) {\n        return /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            color: 'green',\n            fontWeight: \"bolder\"\n          },\n          children: \"Active\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 21\n        }, this);\n      } else {\n        return /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            color: 'red',\n            fontWeight: \"bolder\"\n          },\n          children: \"InActive\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 21\n        }, this);\n      }\n    }\n  }];\n  useEffect(() => {\n    fetch(url + '/auth/refresh_token', {\n      method: 'POST',\n      credentials: 'include',\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(response => response.json()).then(data => {\n      if (!data.token) {\n        return;\n      }\n\n      console.log(data.token);\n      setCookie(\"token\", data.token);\n      localStorage.setItem(\"token\", data.token);\n    });\n    getProduct(); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(NavBar, { ...props\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          margin: '10px 20px'\n        },\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          onClick: () => {\n            props.history.push('/product/add');\n          },\n          children: \"Add Product\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(MaterialTable, {\n        style: {\n          margin: '15px'\n        },\n        title: \"Products\",\n        data: product,\n        columns: columns,\n        actions: [{\n          icon: 'edit',\n          tooltip: 'Edit User',\n          onClick: async (event, rowData) => {\n            const edit = await editProductFormatter(rowData);\n            console.log(\"Edit\", edit);\n            props.history.replace({\n              pathname: '/product/edit',\n              state: edit\n            });\n          }\n        }],\n        editable: {\n          onRowDelete: selectedRow => new Promise(async (resolve, reject) => {\n            const id = selectedRow._id;\n            console.log(id);\n            const data = await deleteProduct(id);\n\n            if (data) {\n              setBarOpen(true);\n              getProduct();\n              resolve();\n            }\n          })\n        },\n        options: {\n          actionsColumnIndex: -1,\n          showFirstLastPageButtons: false,\n          pageSizeOptions: [5, 10, 20, 50]\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Snackbar, {\n      open: barOpen,\n      message: \"Successfully Deleted\",\n      autoHideDuration: 3500,\n      onClose: handleClose\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 89,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Product, \"KZiNNQl0vzSQMh1TpPZqwPT50JA=\", false, function () {\n  return [useCookies];\n});\n\n_c = Product;\nexport default Product;\n\nvar _c;\n\n$RefreshReg$(_c, \"Product\");","map":{"version":3,"sources":["/Users/mac/dev/store2/admin/src/products/product.js"],"names":["React","useEffect","useState","useContext","MaterialTable","Button","Spinner","getAllProducts","deleteProduct","editProductFormatter","Snackbar","NavBar","axios","url","jwt","userId","useCookies","Product","props","cookies","setCookie","product","setProduct","barOpen","setBarOpen","dbError","setDbError","getProduct","token","res","get","headers","authorization","console","log","status","data","error","handleClose","columns","title","field","render","rowData","isActive","color","fontWeight","fetch","method","credentials","then","response","json","localStorage","setItem","margin","history","push","icon","tooltip","onClick","event","edit","replace","pathname","state","onRowDelete","selectedRow","Promise","resolve","reject","id","_id","actionsColumnIndex","showFirstLastPageButtons","pageSizeOptions"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useContext } from 'react';\nimport MaterialTable from 'material-table'\nimport { Button, Spinner, } from 'react-bootstrap';\nimport { getAllProducts, deleteProduct, editProductFormatter } from './../services/productService'\nimport Snackbar from '@material-ui/core/Snackbar'\nimport NavBar from '../components/navBar';\nimport * as axios from 'axios';\nimport { url, jwt, userId } from './../constants/auth';\nimport { useCookies } from \"react-cookie\";\n\nexport const Product = (props) => {\n    const [cookies, setCookie] = useCookies([\"token\"]);\n    const [product, setProduct] = useState([])\n    const [barOpen, setBarOpen] = useState(false)\n    const [dbError, setDbError] = useState(false)\n\n    const getProduct = async () => {\n        try {\n            const token = cookies.token;\n            const res = await axios.get(url + '/product/user/60826e0faab69e002b1293d1', {\n                headers: {\n                    'Content-Type': 'application/json',\n                    authorization: `Bearer ${token}`\n                }\n            });\n            console.log(res)\n            if (res.status === 200) {\n                setProduct(res.data);\n            }\n        }\n        catch (error) {\n            if (error) {\n                setDbError(true);\n            }\n        }\n    }\n    const handleClose = () => {\n        setBarOpen(false)\n    }\n\n    const columns = [{ title: \"Product ID\", field: '_id' },\n    { title: \"Product Name\", field: 'name' },\n    { title: \"Brand Name\", field: 'brand.brandName' },\n    { title: 'Model Name', field: \"manufactureDetails.modelName\" },\n    { title: \"Category\", field: 'category.name' },\n    //  {title:\"Variants\",field:'variants.length'},\n    { title: \"Images\", field: 'gallery.length' },\n    { title: \"Tags\", field: 'tags.length' },\n    // {title:\"Stock\",field:'variants[0].stock'},\n    // {title:\"Price\",field:'variants[0].price'},\n    {\n        title: \"Is Active\", field: 'isActive',\n        render: rowData => {\n            if (rowData.isActive) {\n                return (\n                    <p style={{ color: 'green', fontWeight: \"bolder\" }}>Active</p>\n                )\n            }\n            else {\n                return (\n                    <p style={{ color: 'red', fontWeight: \"bolder\" }}>InActive</p>\n                )\n            }\n        }\n    },\n    ]\n    useEffect(() => {\n\n        fetch(url + '/auth/refresh_token', {\n            method: 'POST', credentials: 'include', headers: {\n                'Content-Type': 'application/json',\n            }\n        })\n            .then(response => response.json())\n            .then(data => {\n                if (!data.token) {\n                    return;\n                }\n                console.log(data.token);\n                setCookie(\"token\", data.token);\n                localStorage.setItem(\"token\", data.token);\n            });\n        getProduct();\n\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [])\n    return (\n\n        <div >\n\n            <NavBar {...props}></NavBar>\n\n\n            <div>\n                <div style={{ margin: '10px 20px' }}>\n                    <Button onClick={() => { props.history.push('/product/add') }}>Add Product</Button>\n\n                </div>\n                <MaterialTable style={{ margin: '15px' }} title=\"Products\" data={product} columns={columns}\n                    actions={[\n                        {\n\n                            icon: 'edit',\n                            tooltip: 'Edit User',\n                            onClick: async (event, rowData) => {\n                                const edit = await editProductFormatter(rowData)\n                                console.log(\"Edit\", edit)\n                                props.history.replace({\n                                    pathname: '/product/edit',\n                                    state: edit\n                                })\n                            }\n                        },\n                    ]}\n                    editable={{\n                        onRowDelete: selectedRow => new Promise(async (resolve, reject) => {\n                            const id = selectedRow._id\n                            console.log(id)\n                            const data = await deleteProduct(id)\n                            if (data) {\n                                setBarOpen(true)\n                                getProduct()\n                                resolve()\n                            }\n                        }),\n                    }}\n\n                    options={{\n                        actionsColumnIndex: -1,\n                        showFirstLastPageButtons: false,\n                        pageSizeOptions: [5, 10, 20, 50]\n                    }}\n\n                >\n\n                </MaterialTable>\n\n            </div>\n\n\n            <Snackbar open={barOpen} message=\"Successfully Deleted\" autoHideDuration={3500} onClose={handleClose}>\n\n            </Snackbar>\n        </div>\n\n    )\n}\nexport default Product"]},"metadata":{},"sourceType":"module"}